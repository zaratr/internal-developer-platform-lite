# Multi-Cloud Deployment Guide

IDP-Lite is designed to be cloud-agnostic. While the local environment uses Docker Compose for simplicity, the service artifacts (Docker images) and configuration patterns are designed to deploy seamlessly to any major cloud provider.

## Cloud Provider Support

| Feature | AWS | Azure | Google Cloud | IBM Cloud |
|---------|-----|-------|--------------|-----------|
| **Container Hosting** | ECS / EKS | AKS / Container Apps | GKE / Cloud Run | IKS / Code Engine |
| **Secrets** | Secrets Manager | Key Vault | Secret Manager | Secrets Manager |
| **Observability** | CloudWatch | Azure Monitor | Cloud Operations | Sysdig / LogDNA |

## Configuration Mapping

The `ConfigProvider` interface in `platform/core.py` abstracts away the environment specifics.

### AWS (ECS/EKS)
Map environment variables directly or use a custom `AwsSecretsConfigProvider` (implementation pattern provided in `examples/`).

```yaml
# Kubernetes / EKS Example
env:
  - name: APP_ENV
    value: "production"
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: my-app-secrets
        key: db-password
```

### Azure (Container Apps)
Use Dapr sidecars or native key vault integration.

```json
{
  "secrets": [
    {
      "name": "db-password",
      "keyVaultUrl": "https://mykv.vault.azure.net/secrets/db-password"
    }
  ]
}
```

### Google Cloud (Cloud Run)
Mount secrets as environment variables or volumes.

```yaml
# gcloud run deploy ... 
--set-secrets="DB_PASSWORD=projects/123/secrets/db-password:1"
```

### IBM Cloud (Code Engine)
Bind secrets to the application.

```bash
ibmcloud ce app create --name my-app --image ... --env-from-secret my-secret
```

## Strategy
1. **Build Once, Run Anywhere**: The Docker image generated by IDP-Lite is the same for all clouds.
2. **Externalized Config**: We strictly follow 12-factor app principles.
3. **Provider Abstraction**: Switch cloud providers by changing the deployment manifest (Terraform/Helm) without changing application code.
